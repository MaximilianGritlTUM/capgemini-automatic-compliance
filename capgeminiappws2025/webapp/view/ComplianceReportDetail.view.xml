<mvc:View
    controllerName="capgeminiappws2025.controller.ComplianceReportDetail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core">

    <Page id="reportDetailPage" title="Regulatory Readiness Report">
        <headerContent>
            <!-- Export Button -->
            <Button
                text="Export"
                icon="sap-icon://download"
                type="Transparent"
                press=".onExportReport" />
        </headerContent>

        <content>
            <VBox width="100%" renderType="Div" class="sapUiSmallMargin">
                <!-- Header: Regulation, Fulfillment, Timestamp, Audit Trail etc -->
                <ObjectHeader
                    title="{RegulationId}"
                    intro="Regulation"
                    number="{DegreeOfFulfillment}"
                    numberUnit="% Fulfillment"
                    responsive="true">
                    <attributes>
                        <ObjectAttribute
                            title="Report ID"
                            text="{ReportId}" />
                        <ObjectAttribute
                            title="Run Timestamp"
                            text="{RunTimestamp}" />
                        <ObjectAttribute
                            title="Compliance Relevance"
                            text="{ComplianceRelevance}" />
                        <ObjectAttribute
                            title="Audit Trail ID"
                            text="{AuditTrailId}" />
                    </attributes>
                </ObjectHeader>

                <!--  Data availability / quality / gap / recommendations -->
                <HBox class="sapUiSmallMarginTop sapUiSmallMarginBottom" justifyContent="SpaceBetween">
                    <VBox class="sapUiTinyMarginEnd" width="25%">
                        <Title text="Data Availability" level="H5" />
                        <Text text="Available, partially available, missing data overview" />
                    </VBox>
                    <VBox class="sapUiTinyMarginEnd" width="25%">
                        <Title text="Data Quality" level="H5" />
                        <Text text="{DataQualitySummary}" />
                    </VBox>
                    <VBox class="sapUiTinyMarginEnd" width="25%">
                        <Title text="Data Gaps" level="H5" />
                        <Text text="{DataGapsSummary}" />
                    </VBox>
                    <VBox width="25%">
                        <Title text="Actionable Recommendations" level="H5" />
                        <Text text="{RecommendationsSummary}" />
                    </VBox>
                </HBox>

                <!-- Material / Supplier Result -->
                <IconTabBar expandable="false" class="sapUiSmallMarginTop">
                    <!-- Materials Tab -->
                    <items>
                        <IconTabFilter
                            text="Materials"
                            icon="sap-icon://product">
                            <Table
                                id="materialsTable"
                                inset="false"
                                width="100%"
                                items="{
                                    path: 'Materials'
                                }">

                                <columns>
                                    <Column>
                                        <Text text="Material ID" />
                                    </Column>
                                    <Column>
                                        <Text text="Description" />
                                    </Column>
                                    <Column>
                                        <Text text="Data Availability" />
                                    </Column>
                                    <Column>
                                        <Text text="Data Quality" />
                                    </Column>
                                    <Column>
                                        <Text text="Data Gaps" />
                                    </Column>
                                    <Column>
                                        <Text text="Recommendations" />
                                    </Column>
                                    <Column>
                                        <Text text="Data Source" />
                                    </Column>
                                </columns>

                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Text text="{ObjectId}" />
                                            <Text text="{ObjectName}" />
                                            <!-- Data availability: available / partial / missing -->
                                            <ObjectStatus
                                                text="{AvailabilityCategory}"
                                                icon="{= ${AvailabilityCategory} === 'AVAILABLE' ? 'sap-icon://accept' : ${AvailabilityCategory} === 'PARTIAL' ? 'sap-icon://alert' : 'sap-icon://error'}"
                                                state="{= ${AvailabilityCategory} === 'AVAILABLE' ? 'Success' : ${AvailabilityCategory} === 'PARTIAL' ? 'Warning' : 'Error'}" />
                                            <ObjectStatus
                                                text="{DataQuality}"
                                                state="{= ${DataQuality} === 'GOOD' ? 'Success' : ${DataQuality} === 'MEDIUM' ? 'Warning' : 'Error'}" />
                                            <Text text="{GapDescription}" />
                                            <Text text="{Recommendation}" />
                                            <Text text="{DataSource}" />
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </IconTabFilter>

                        <!-- Suppliers Tab -->
                        <IconTabFilter
                            text="Suppliers"
                            icon="sap-icon://supplier">
                            <Table
                                id="suppliersTable"
                                inset="false"
                                width="100%"
                                items="{
                                    path: 'Suppliers'
                                }">

                                <columns>
                                    <Column>
                                        <Text text="Supplier ID" />
                                    </Column>
                                    <Column>
                                        <Text text="Name" />
                                    </Column>
                                    <Column>
                                        <Text text="Data Availability" />
                                    </Column>
                                    <Column>
                                        <Text text="Data Quality" />
                                    </Column>
                                    <Column>
                                        <Text text="Data Gaps" />
                                    </Column>
                                    <Column>
                                        <Text text="Recommendations" />
                                    </Column>
                                    <Column>
                                        <Text text="Data Source" />
                                    </Column>
                                </columns>

                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Text text="{ObjectId}" />
                                            <Text text="{ObjectName}" />
                                            <ObjectStatus
                                                text="{AvailabilityCategory}"
                                                icon="{= ${AvailabilityCategory} === 'AVAILABLE' ? 'sap-icon://accept' : ${AvailabilityCategory} === 'PARTIAL' ? 'sap-icon://alert' : 'sap-icon://error'}"
                                                state="{= ${AvailabilityCategory} === 'AVAILABLE' ? 'Success' : ${AvailabilityCategory} === 'PARTIAL' ? 'Warning' : 'Error'}" />
                                            <ObjectStatus
                                                text="{DataQuality}"
                                                state="{= ${DataQuality} === 'GOOD' ? 'Success' : ${DataQuality} === 'MEDIUM' ? 'Warning' : 'Error'}" />
                                            <Text text="{GapDescription}" />
                                            <Text text="{Recommendation}" />
                                            <Text text="{DataSource}" />
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
            </VBox>
        </content>
    </Page>
</mvc:View>
