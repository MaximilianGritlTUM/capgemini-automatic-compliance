<mvc:View
  controllerName="capgeminiappws2025.controller.TransactionDashboard"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">

  <Page title="Transactional History Board">
    <content>
      <VBox class="sapUiSmallMargin sapUiContentPadding">

        <Toolbar>
          <Title text="Top Materials (Frequency / Quantity)" level="H3"/>
          <ToolbarSpacer/>
          
          <SearchField
            id="sfMaterial"
            width="16rem"
            placeholder="Search material in Top N ..."
            liveChange=".onMaterialSearchLive"
            search=".onMaterialSearch" />

          <Select
            id="selTopN"
            width="6rem"
            selectedKey="{vm>/com/topN}"
            change=".onTopNChange">
            <items>
              <core:Item key="20" text="20"/>
              <core:Item key="50" text="50"/>
              <core:Item key="100" text="100"/>
              <core:Item key="200" text="200"/>
            </items>
          </Select>

          <SegmentedButton
            selectedKey="{vm>/com/sortBy}"
            selectionChange=".onSortSelect"
            width="20rem">
            <items>
              <SegmentedButtonItem key="FREQ" text="Top Frequency" icon="sap-icon://number-sign"/>
              <SegmentedButtonItem key="VOL"  text="Top Quantity"  icon="sap-icon://measure"/>
            </items>
          </SegmentedButton>
        </Toolbar>

        <HBox class="sapUiSmallMarginTop" justifyContent="SpaceBetween" wrap="Wrap">
          <VBox width="49%">
            <ObjectStatus title="Total Movements (Top N only)"
              text="{vm>/com/kpi/totalMovements}"
              state="Information"/>
          </VBox>

          <VBox width="49%">
            <ObjectStatus title="Total Quantity (Top N only)"
              text="{vm>/com/kpi/totalVolume}"
              state="Success"/>
          </VBox>
        </HBox>

        <Text class="sapUiTinyMarginTop" text="{vm>/com/note}"/>

        <Table
          id="tblTopMaterialsCom"
          class="sapUiSmallMarginTop"
          headerText="Results are sorted with Top Frequency/Top Quantity"
          growing="false"
          mode="None">

          <columns>
            <Column width="16rem"><Text text="Material"/></Column>
            <Column width="8rem"><Text text="Plant"/></Column>
            <Column hAlign="End" width="10rem"><Text text="Frequency"/></Column>
            <Column hAlign="End" width="10rem"><Text text="Quantity"/></Column>
            <Column width="6rem"><Text text="UoM"/></Column>
            <Column hAlign="End" width="8rem"><Text text="Last Date"/></Column>
          </columns>
          
          <items>
          </items>

        </Table>

      </VBox>
    </content>
  </Page>
</mvc:View>